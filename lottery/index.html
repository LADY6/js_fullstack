<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <div class="luckDraw">
        <ul class="lottery">
            <li class="active">1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>开始抽奖</li>
        </ul>
        <span class="prize">奖品</span>
    </div>
    <script>
        var lottery = document.querySelector('.lottery')
        var ali = lottery.querySelectorAll('li')
        var prize = document.querySelector('.prize')
        var arr = [1,2,3,4,5,6,7,8]
        var i=0 //转到哪个位置
        var count = 0 //转圈的初始值
        var totalCount = 9
        var speed = 500 //速度
        var minSpeed = 500 
        var timer
        var isClick = true
        var index = 3 //转到哪一个奖品
        ali[ali.length-1].onclick = function(){
            if(isClick){
                count = 0;
                run()
                isClick = false
            }
        }
        function run(){
            speed -=50 //speed=speed-50
            if(speed <= 10){
                speed = 10
            }
            for(var j = 0; j < ali.length; j++){
                ali[j].classList.remove('active')
            }
            i++
            if(i >= ali.lenght - 1){
                i=0
                count++
            }
            prize.innerHTML = arr[i]
            ali[i].classList.add('active')
            if(count>=totalCount && (i + 1) == index){
                speed = minSpeed
                clearTimeout(timer)
                isClick = true
            }
            else{
                timer = setTimeout(run,speed)//定时器
                if(count >= totalCount - 1|| speed <= 50){
                    speed += 100;
                }
            }
        }
    </script>
</body>
</html>